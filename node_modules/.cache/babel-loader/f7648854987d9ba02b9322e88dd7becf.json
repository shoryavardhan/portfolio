{"ast":null,"code":"// Base object for different progress bar shapes\nvar Path = require('./path');\n\nvar utils = require('./utils');\n\nvar DESTROYED_ERROR = 'Object is destroyed';\n\nvar Shape = function Shape(container, opts) {\n  // Throw a better error if progress bars are not initialized with `new`\n  // keyword\n  if (!(this instanceof Shape)) {\n    throw new Error('Constructor was called without new keyword');\n  } // Prevent calling constructor without parameters so inheritance\n  // works correctly. To understand, this is how Shape is inherited:\n  //\n  //   Line.prototype = new Shape();\n  //\n  // We just want to set the prototype for Line.\n\n\n  if (arguments.length === 0) {\n    return;\n  } // Default parameters for progress bar creation\n\n\n  this._opts = utils.extend({\n    color: '#555',\n    strokeWidth: 1.0,\n    trailColor: null,\n    trailWidth: null,\n    fill: null,\n    text: {\n      style: {\n        color: null,\n        position: 'absolute',\n        left: '50%',\n        top: '50%',\n        padding: 0,\n        margin: 0,\n        transform: {\n          prefix: true,\n          value: 'translate(-50%, -50%)'\n        }\n      },\n      autoStyleContainer: true,\n      alignToBottom: true,\n      value: null,\n      className: 'progressbar-text'\n    },\n    svgStyle: {\n      display: 'block',\n      width: '100%'\n    },\n    warnings: false\n  }, opts, true); // Use recursive extend\n  // If user specifies e.g. svgStyle or text style, the whole object\n  // should replace the defaults to make working with styles easier\n\n  if (utils.isObject(opts) && opts.svgStyle !== undefined) {\n    this._opts.svgStyle = opts.svgStyle;\n  }\n\n  if (utils.isObject(opts) && utils.isObject(opts.text) && opts.text.style !== undefined) {\n    this._opts.text.style = opts.text.style;\n  }\n\n  var svgView = this._createSvgView(this._opts);\n\n  var element;\n\n  if (utils.isString(container)) {\n    element = document.querySelector(container);\n  } else {\n    element = container;\n  }\n\n  if (!element) {\n    throw new Error('Container does not exist: ' + container);\n  }\n\n  this._container = element;\n\n  this._container.appendChild(svgView.svg);\n\n  if (this._opts.warnings) {\n    this._warnContainerAspectRatio(this._container);\n  }\n\n  if (this._opts.svgStyle) {\n    utils.setStyles(svgView.svg, this._opts.svgStyle);\n  } // Expose public attributes before Path initialization\n\n\n  this.svg = svgView.svg;\n  this.path = svgView.path;\n  this.trail = svgView.trail;\n  this.text = null;\n  var newOpts = utils.extend({\n    attachment: undefined,\n    shape: this\n  }, this._opts);\n  this._progressPath = new Path(svgView.path, newOpts);\n\n  if (utils.isObject(this._opts.text) && this._opts.text.value !== null) {\n    this.setText(this._opts.text.value);\n  }\n};\n\nShape.prototype.animate = function animate(progress, opts, cb) {\n  if (this._progressPath === null) {\n    throw new Error(DESTROYED_ERROR);\n  }\n\n  this._progressPath.animate(progress, opts, cb);\n};\n\nShape.prototype.stop = function stop() {\n  if (this._progressPath === null) {\n    throw new Error(DESTROYED_ERROR);\n  } // Don't crash if stop is called inside step function\n\n\n  if (this._progressPath === undefined) {\n    return;\n  }\n\n  this._progressPath.stop();\n};\n\nShape.prototype.pause = function pause() {\n  if (this._progressPath === null) {\n    throw new Error(DESTROYED_ERROR);\n  }\n\n  if (this._progressPath === undefined) {\n    return;\n  }\n\n  if (!this._progressPath._tweenable) {\n    // It seems that we can't pause this\n    return;\n  }\n\n  this._progressPath._tweenable.pause();\n};\n\nShape.prototype.resume = function resume() {\n  if (this._progressPath === null) {\n    throw new Error(DESTROYED_ERROR);\n  }\n\n  if (this._progressPath === undefined) {\n    return;\n  }\n\n  if (!this._progressPath._tweenable) {\n    // It seems that we can't resume this\n    return;\n  }\n\n  this._progressPath._tweenable.resume();\n};\n\nShape.prototype.destroy = function destroy() {\n  if (this._progressPath === null) {\n    throw new Error(DESTROYED_ERROR);\n  }\n\n  this.stop();\n  this.svg.parentNode.removeChild(this.svg);\n  this.svg = null;\n  this.path = null;\n  this.trail = null;\n  this._progressPath = null;\n\n  if (this.text !== null) {\n    this.text.parentNode.removeChild(this.text);\n    this.text = null;\n  }\n};\n\nShape.prototype.set = function set(progress) {\n  if (this._progressPath === null) {\n    throw new Error(DESTROYED_ERROR);\n  }\n\n  this._progressPath.set(progress);\n};\n\nShape.prototype.value = function value() {\n  if (this._progressPath === null) {\n    throw new Error(DESTROYED_ERROR);\n  }\n\n  if (this._progressPath === undefined) {\n    return 0;\n  }\n\n  return this._progressPath.value();\n};\n\nShape.prototype.setText = function setText(newText) {\n  if (this._progressPath === null) {\n    throw new Error(DESTROYED_ERROR);\n  }\n\n  if (this.text === null) {\n    // Create new text node\n    this.text = this._createTextContainer(this._opts, this._container);\n\n    this._container.appendChild(this.text);\n  } // Remove previous text and add new\n\n\n  if (utils.isObject(newText)) {\n    utils.removeChildren(this.text);\n    this.text.appendChild(newText);\n  } else {\n    this.text.innerHTML = newText;\n  }\n};\n\nShape.prototype._createSvgView = function _createSvgView(opts) {\n  var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\n  this._initializeSvg(svg, opts);\n\n  var trailPath = null; // Each option listed in the if condition are 'triggers' for creating\n  // the trail path\n\n  if (opts.trailColor || opts.trailWidth) {\n    trailPath = this._createTrail(opts);\n    svg.appendChild(trailPath);\n  }\n\n  var path = this._createPath(opts);\n\n  svg.appendChild(path);\n  return {\n    svg: svg,\n    path: path,\n    trail: trailPath\n  };\n};\n\nShape.prototype._initializeSvg = function _initializeSvg(svg, opts) {\n  svg.setAttribute('viewBox', '0 0 100 100');\n};\n\nShape.prototype._createPath = function _createPath(opts) {\n  var pathString = this._pathString(opts);\n\n  return this._createPathElement(pathString, opts);\n};\n\nShape.prototype._createTrail = function _createTrail(opts) {\n  // Create path string with original passed options\n  var pathString = this._trailString(opts); // Prevent modifying original\n\n\n  var newOpts = utils.extend({}, opts); // Defaults for parameters which modify trail path\n\n  if (!newOpts.trailColor) {\n    newOpts.trailColor = '#eee';\n  }\n\n  if (!newOpts.trailWidth) {\n    newOpts.trailWidth = newOpts.strokeWidth;\n  }\n\n  newOpts.color = newOpts.trailColor;\n  newOpts.strokeWidth = newOpts.trailWidth; // When trail path is set, fill must be set for it instead of the\n  // actual path to prevent trail stroke from clipping\n\n  newOpts.fill = null;\n  return this._createPathElement(pathString, newOpts);\n};\n\nShape.prototype._createPathElement = function _createPathElement(pathString, opts) {\n  var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  path.setAttribute('d', pathString);\n  path.setAttribute('stroke', opts.color);\n  path.setAttribute('stroke-width', opts.strokeWidth);\n\n  if (opts.fill) {\n    path.setAttribute('fill', opts.fill);\n  } else {\n    path.setAttribute('fill-opacity', '0');\n  }\n\n  return path;\n};\n\nShape.prototype._createTextContainer = function _createTextContainer(opts, container) {\n  var textContainer = document.createElement('div');\n  textContainer.className = opts.text.className;\n  var textStyle = opts.text.style;\n\n  if (textStyle) {\n    if (opts.text.autoStyleContainer) {\n      container.style.position = 'relative';\n    }\n\n    utils.setStyles(textContainer, textStyle); // Default text color to progress bar's color\n\n    if (!textStyle.color) {\n      textContainer.style.color = opts.color;\n    }\n  }\n\n  this._initializeTextContainer(opts, container, textContainer);\n\n  return textContainer;\n}; // Give custom shapes possibility to modify text element\n\n\nShape.prototype._initializeTextContainer = function (opts, container, element) {// By default, no-op\n  // Custom shapes should respect API options, such as text.style\n};\n\nShape.prototype._pathString = function _pathString(opts) {\n  throw new Error('Override this function for each progress bar');\n};\n\nShape.prototype._trailString = function _trailString(opts) {\n  throw new Error('Override this function for each progress bar');\n};\n\nShape.prototype._warnContainerAspectRatio = function _warnContainerAspectRatio(container) {\n  if (!this.containerAspectRatio) {\n    return;\n  }\n\n  var computedStyle = window.getComputedStyle(container, null);\n  var width = parseFloat(computedStyle.getPropertyValue('width'), 10);\n  var height = parseFloat(computedStyle.getPropertyValue('height'), 10);\n\n  if (!utils.floatEquals(this.containerAspectRatio, width / height)) {\n    console.warn('Incorrect aspect ratio of container', '#' + container.id, 'detected:', computedStyle.getPropertyValue('width') + '(width)', '/', computedStyle.getPropertyValue('height') + '(height)', '=', width / height);\n    console.warn('Aspect ratio of should be', this.containerAspectRatio);\n  }\n};\n\nmodule.exports = Shape;","map":{"version":3,"sources":["/home/khanna/Desktop/kpportfolio/node_modules/progressbar.js/src/shape.js"],"names":["Path","require","utils","DESTROYED_ERROR","Shape","container","opts","Error","arguments","length","_opts","extend","color","strokeWidth","trailColor","trailWidth","fill","text","style","position","left","top","padding","margin","transform","prefix","value","autoStyleContainer","alignToBottom","className","svgStyle","display","width","warnings","isObject","undefined","svgView","_createSvgView","element","isString","document","querySelector","_container","appendChild","svg","_warnContainerAspectRatio","setStyles","path","trail","newOpts","attachment","shape","_progressPath","setText","prototype","animate","progress","cb","stop","pause","_tweenable","resume","destroy","parentNode","removeChild","set","newText","_createTextContainer","removeChildren","innerHTML","createElementNS","_initializeSvg","trailPath","_createTrail","_createPath","setAttribute","pathString","_pathString","_createPathElement","_trailString","textContainer","createElement","textStyle","_initializeTextContainer","containerAspectRatio","computedStyle","window","getComputedStyle","parseFloat","getPropertyValue","height","floatEquals","console","warn","id","module","exports"],"mappings":"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","sourcesContent":["// Base object for different progress bar shapes\n\nvar Path = require('./path');\nvar utils = require('./utils');\n\nvar DESTROYED_ERROR = 'Object is destroyed';\n\nvar Shape = function Shape(container, opts) {\n    // Throw a better error if progress bars are not initialized with `new`\n    // keyword\n    if (!(this instanceof Shape)) {\n        throw new Error('Constructor was called without new keyword');\n    }\n\n    // Prevent calling constructor without parameters so inheritance\n    // works correctly. To understand, this is how Shape is inherited:\n    //\n    //   Line.prototype = new Shape();\n    //\n    // We just want to set the prototype for Line.\n    if (arguments.length === 0) {\n        return;\n    }\n\n    // Default parameters for progress bar creation\n    this._opts = utils.extend({\n        color: '#555',\n        strokeWidth: 1.0,\n        trailColor: null,\n        trailWidth: null,\n        fill: null,\n        text: {\n            style: {\n                color: null,\n                position: 'absolute',\n                left: '50%',\n                top: '50%',\n                padding: 0,\n                margin: 0,\n                transform: {\n                    prefix: true,\n                    value: 'translate(-50%, -50%)'\n                }\n            },\n            autoStyleContainer: true,\n            alignToBottom: true,\n            value: null,\n            className: 'progressbar-text'\n        },\n        svgStyle: {\n            display: 'block',\n            width: '100%'\n        },\n        warnings: false\n    }, opts, true);  // Use recursive extend\n\n    // If user specifies e.g. svgStyle or text style, the whole object\n    // should replace the defaults to make working with styles easier\n    if (utils.isObject(opts) && opts.svgStyle !== undefined) {\n        this._opts.svgStyle = opts.svgStyle;\n    }\n    if (utils.isObject(opts) && utils.isObject(opts.text) && opts.text.style !== undefined) {\n        this._opts.text.style = opts.text.style;\n    }\n\n    var svgView = this._createSvgView(this._opts);\n\n    var element;\n    if (utils.isString(container)) {\n        element = document.querySelector(container);\n    } else {\n        element = container;\n    }\n\n    if (!element) {\n        throw new Error('Container does not exist: ' + container);\n    }\n\n    this._container = element;\n    this._container.appendChild(svgView.svg);\n    if (this._opts.warnings) {\n        this._warnContainerAspectRatio(this._container);\n    }\n\n    if (this._opts.svgStyle) {\n        utils.setStyles(svgView.svg, this._opts.svgStyle);\n    }\n\n    // Expose public attributes before Path initialization\n    this.svg = svgView.svg;\n    this.path = svgView.path;\n    this.trail = svgView.trail;\n    this.text = null;\n\n    var newOpts = utils.extend({\n        attachment: undefined,\n        shape: this\n    }, this._opts);\n    this._progressPath = new Path(svgView.path, newOpts);\n\n    if (utils.isObject(this._opts.text) && this._opts.text.value !== null) {\n        this.setText(this._opts.text.value);\n    }\n};\n\nShape.prototype.animate = function animate(progress, opts, cb) {\n    if (this._progressPath === null) {\n        throw new Error(DESTROYED_ERROR);\n    }\n\n    this._progressPath.animate(progress, opts, cb);\n};\n\nShape.prototype.stop = function stop() {\n    if (this._progressPath === null) {\n        throw new Error(DESTROYED_ERROR);\n    }\n\n    // Don't crash if stop is called inside step function\n    if (this._progressPath === undefined) {\n        return;\n    }\n\n    this._progressPath.stop();\n};\n\nShape.prototype.pause = function pause() {\n    if (this._progressPath === null) {\n        throw new Error(DESTROYED_ERROR);\n    }\n\n    if (this._progressPath === undefined) {\n        return;\n    }\n\n    if (!this._progressPath._tweenable) {\n        // It seems that we can't pause this\n        return;\n    }\n\n    this._progressPath._tweenable.pause();\n};\n\nShape.prototype.resume = function resume() {\n    if (this._progressPath === null) {\n        throw new Error(DESTROYED_ERROR);\n    }\n\n    if (this._progressPath === undefined) {\n        return;\n    }\n\n    if (!this._progressPath._tweenable) {\n        // It seems that we can't resume this\n        return;\n    }\n\n    this._progressPath._tweenable.resume();\n};\n\nShape.prototype.destroy = function destroy() {\n    if (this._progressPath === null) {\n        throw new Error(DESTROYED_ERROR);\n    }\n\n    this.stop();\n    this.svg.parentNode.removeChild(this.svg);\n    this.svg = null;\n    this.path = null;\n    this.trail = null;\n    this._progressPath = null;\n\n    if (this.text !== null) {\n        this.text.parentNode.removeChild(this.text);\n        this.text = null;\n    }\n};\n\nShape.prototype.set = function set(progress) {\n    if (this._progressPath === null) {\n        throw new Error(DESTROYED_ERROR);\n    }\n\n    this._progressPath.set(progress);\n};\n\nShape.prototype.value = function value() {\n    if (this._progressPath === null) {\n        throw new Error(DESTROYED_ERROR);\n    }\n\n    if (this._progressPath === undefined) {\n        return 0;\n    }\n\n    return this._progressPath.value();\n};\n\nShape.prototype.setText = function setText(newText) {\n    if (this._progressPath === null) {\n        throw new Error(DESTROYED_ERROR);\n    }\n\n    if (this.text === null) {\n        // Create new text node\n        this.text = this._createTextContainer(this._opts, this._container);\n        this._container.appendChild(this.text);\n    }\n\n    // Remove previous text and add new\n    if (utils.isObject(newText)) {\n        utils.removeChildren(this.text);\n        this.text.appendChild(newText);\n    } else {\n        this.text.innerHTML = newText;\n    }\n};\n\nShape.prototype._createSvgView = function _createSvgView(opts) {\n    var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    this._initializeSvg(svg, opts);\n\n    var trailPath = null;\n    // Each option listed in the if condition are 'triggers' for creating\n    // the trail path\n    if (opts.trailColor || opts.trailWidth) {\n        trailPath = this._createTrail(opts);\n        svg.appendChild(trailPath);\n    }\n\n    var path = this._createPath(opts);\n    svg.appendChild(path);\n\n    return {\n        svg: svg,\n        path: path,\n        trail: trailPath\n    };\n};\n\nShape.prototype._initializeSvg = function _initializeSvg(svg, opts) {\n    svg.setAttribute('viewBox', '0 0 100 100');\n};\n\nShape.prototype._createPath = function _createPath(opts) {\n    var pathString = this._pathString(opts);\n    return this._createPathElement(pathString, opts);\n};\n\nShape.prototype._createTrail = function _createTrail(opts) {\n    // Create path string with original passed options\n    var pathString = this._trailString(opts);\n\n    // Prevent modifying original\n    var newOpts = utils.extend({}, opts);\n\n    // Defaults for parameters which modify trail path\n    if (!newOpts.trailColor) {\n        newOpts.trailColor = '#eee';\n    }\n    if (!newOpts.trailWidth) {\n        newOpts.trailWidth = newOpts.strokeWidth;\n    }\n\n    newOpts.color = newOpts.trailColor;\n    newOpts.strokeWidth = newOpts.trailWidth;\n\n    // When trail path is set, fill must be set for it instead of the\n    // actual path to prevent trail stroke from clipping\n    newOpts.fill = null;\n\n    return this._createPathElement(pathString, newOpts);\n};\n\nShape.prototype._createPathElement = function _createPathElement(pathString, opts) {\n    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path.setAttribute('d', pathString);\n    path.setAttribute('stroke', opts.color);\n    path.setAttribute('stroke-width', opts.strokeWidth);\n\n    if (opts.fill) {\n        path.setAttribute('fill', opts.fill);\n    } else {\n        path.setAttribute('fill-opacity', '0');\n    }\n\n    return path;\n};\n\nShape.prototype._createTextContainer = function _createTextContainer(opts, container) {\n    var textContainer = document.createElement('div');\n    textContainer.className = opts.text.className;\n\n    var textStyle = opts.text.style;\n    if (textStyle) {\n        if (opts.text.autoStyleContainer) {\n            container.style.position = 'relative';\n        }\n\n        utils.setStyles(textContainer, textStyle);\n        // Default text color to progress bar's color\n        if (!textStyle.color) {\n            textContainer.style.color = opts.color;\n        }\n    }\n\n    this._initializeTextContainer(opts, container, textContainer);\n    return textContainer;\n};\n\n// Give custom shapes possibility to modify text element\nShape.prototype._initializeTextContainer = function(opts, container, element) {\n    // By default, no-op\n    // Custom shapes should respect API options, such as text.style\n};\n\nShape.prototype._pathString = function _pathString(opts) {\n    throw new Error('Override this function for each progress bar');\n};\n\nShape.prototype._trailString = function _trailString(opts) {\n    throw new Error('Override this function for each progress bar');\n};\n\nShape.prototype._warnContainerAspectRatio = function _warnContainerAspectRatio(container) {\n    if (!this.containerAspectRatio) {\n        return;\n    }\n\n    var computedStyle = window.getComputedStyle(container, null);\n    var width = parseFloat(computedStyle.getPropertyValue('width'), 10);\n    var height = parseFloat(computedStyle.getPropertyValue('height'), 10);\n    if (!utils.floatEquals(this.containerAspectRatio, width / height)) {\n        console.warn(\n            'Incorrect aspect ratio of container',\n            '#' + container.id,\n            'detected:',\n            computedStyle.getPropertyValue('width') + '(width)',\n            '/',\n            computedStyle.getPropertyValue('height') + '(height)',\n            '=',\n            width / height\n        );\n\n        console.warn(\n            'Aspect ratio of should be',\n            this.containerAspectRatio\n        );\n    }\n};\n\nmodule.exports = Shape;\n"]},"metadata":{},"sourceType":"script"}